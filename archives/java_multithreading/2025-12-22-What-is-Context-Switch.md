---
type: java_multithreading
number: 2
---

## 2025-12-22 What is Context Switch?

<details>
<summary>복습 키워드: (여기에 키워드 3개 적기)</summary>

### 컨텍스트 스위치

- 한 스레드의 실행을 중단하고 다른 스레드를 실행하기 위해 필요한 상태 정보를 저장하고 복원하는 일련의 과정
- 인간이 여러 작업을 전환할 때 잠시 집중력을 잃는 시간처럼, OS도 컨텍스트 스위치 과정에서 비생산적인 시간을 소모


### 컨텍스트 스위치 비용

- 스레드 내 컨텍스트 스위치: 동일한 프로세스 내의 두 스레드 간 컨텍스트 스위치는 훨씬 저렴, 스레드들은 프로세스의 많은 자원(메모리 공간 등)을 공유하기 때문에, 저장하고 복원해야 할 정보가 상대적으로 적음
- 프로세스 간 컨텍스트 스위치: 각 프로세스는 독립적인 메모리 공간과 자원을 가지므로, 전환 시 더 많은 상태 정보를 저장하고 복원

- 자원 저장 및 복원: 레지스터, CPU 캐시, 커널 메모리 자원 등을 사용. 컨텍스트 스위치가 발생하면, 현재 스레드의 이 모든 상태 정보를 저장하고, 새로 실행될 스레드의 상태 정보를 CPU 및 메모리로 다시 로드 필요
- 쓰레싱(Thrashing): 실제 작업을 수행하는 시간보다 컨텍스트 스위치에 더 많은 시간을 할애


### 스레드 스케줄링: CPU 시간을 공정하게 분배하는 방법

- 선입선출(First Come, First Serve - FCFS): 매우 긴 작업을 수행하는 스레드가 먼저 도착하면?
- 최단 작업 우선(Shortest Job First - SJF): 계산량이 많은 긴 작업 스레드들은 영원히 실행되지 못하고 기아 상태
- 동적 우선순위(Dynamic Priority): CPU 시간을 '에포크(Epochs)'라는 중간 크기의 조각으로 나누고, 각 에포크 동안 운영체제는 각 스레드에 다른 '타임 슬라이스(Time Slice)'를 할당

### 동적 우선순위 스케줄링의 목표

- 상호작용성 및 실시간성 보장: 사용자 인터랙션이 필요한 UI 스레드나 실시간 처리가 필요한 스레드에는 더 높은 우선순위
- 기아 현상 방지: 이전 에포크에서 충분한 실행 시간을 얻지 못했거나 완료되지 못한 계산 스레드에는 우선순위를 높여 기아 상태에 빠지는 것을 방지
### 스레드 vs 프로세스

| 특징               | 스레드 (Threads)  | 프로세스 (Processes)   |
| :--- | :------ | :------|
| **자원 공유**      | 동일 프로세스 내에서 많은 자원(메모리, 파일 핸들 등)을 공유 | 완전히 독립적인 자원(각자 고유한 메모리 공간)을 가짐 |
| **생성/소멸 속도** | 빠름                                              | 느림                                                   |
| **컨텍스트 스위치** | 동일 프로세스 내에서 저렴하고 빠름                | 독립적인 주소 공간으로 인해 비싸고 느림                |
| **통신 방식**      | 공유 메모리를 통한 직접 통신 (lock 필요)          | IPC(Inter-Process Communication) 메커니즘 사용         |
| **격리 및 안정성** | 하나의 스레드 오류가 전체 프로세스에 영향           | 한 프로세스 오류가 다른 프로세스에 영향 미치지 않음    |



### 스레드를 사용하는 경우

- 데이터 공유가 필요한 경우
- 생성/소멸 빈번
- 컨텍스트 스위치 오버헤드 최소화
- 단일 애플리케이션 내 병렬 처리


### 프로세스를 사용하는 경우

- 보안 및 안정성 우선
- 관련 없는 작업 처리
- 자원 격리 필요

</details>



